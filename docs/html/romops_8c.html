<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CBUSlib: romops.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CBUSlib<span id="projectnumber">&#160;2m</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('romops_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">romops.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="devincs_8h_source.html">devincs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="romops_8h_source.html">romops.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_e_e_p_r_o_m_8h_source.html">EEPROM.h</a>&quot;</code><br />
<code>#include &quot;hwsettings.h&quot;</code><br />
<code>#include &quot;module.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9c036acbdc6bb16d7e80349b77d45251"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a9c036acbdc6bb16d7e80349b77d45251">writeFlashShort</a> (void)</td></tr>
<tr class="memdesc:a9c036acbdc6bb16d7e80349b77d45251"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash block write.  <a href="romops_8c.html#a9c036acbdc6bb16d7e80349b77d45251">More...</a><br /></td></tr>
<tr class="separator:a9c036acbdc6bb16d7e80349b77d45251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c43e849624fd34b8887a26c0bd94eb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a0c43e849624fd34b8887a26c0bd94eb9">writeFlashWithErase</a> (void)</td></tr>
<tr class="memdesc:a0c43e849624fd34b8887a26c0bd94eb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash block write.  <a href="romops_8c.html#a0c43e849624fd34b8887a26c0bd94eb9">More...</a><br /></td></tr>
<tr class="separator:a0c43e849624fd34b8887a26c0bd94eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa110b0fadbf54ad889081cf81818f73"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#aaa110b0fadbf54ad889081cf81818f73">readFlashBlock</a> (WORD flashAddr)</td></tr>
<tr class="memdesc:aaa110b0fadbf54ad889081cf81818f73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash block read.  <a href="romops_8c.html#aaa110b0fadbf54ad889081cf81818f73">More...</a><br /></td></tr>
<tr class="separator:aaa110b0fadbf54ad889081cf81818f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02557928852521f6abecc4d65c6ba12b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a02557928852521f6abecc4d65c6ba12b">initRomOps</a> (void)</td></tr>
<tr class="memdesc:a02557928852521f6abecc4d65c6ba12b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise variables for Flash program tracking.  <a href="romops_8c.html#a02557928852521f6abecc4d65c6ba12b">More...</a><br /></td></tr>
<tr class="separator:a02557928852521f6abecc4d65c6ba12b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25fe3242898cee3cc9afdcd5a5bf94c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a25fe3242898cee3cc9afdcd5a5bf94c7">flushFlashImage</a> (void)</td></tr>
<tr class="memdesc:a25fe3242898cee3cc9afdcd5a5bf94c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the buffer has unwritten changes then write these out to Flash.  <a href="romops_8c.html#a25fe3242898cee3cc9afdcd5a5bf94c7">More...</a><br /></td></tr>
<tr class="separator:a25fe3242898cee3cc9afdcd5a5bf94c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8871bc537122c685a7a4581dd581f484"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a8871bc537122c685a7a4581dd581f484">writeFlashImage</a> (BYTE *addr, BYTE data)</td></tr>
<tr class="memdesc:a8871bc537122c685a7a4581dd581f484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a byte to the FLASH image.  <a href="romops_8c.html#a8871bc537122c685a7a4581dd581f484">More...</a><br /></td></tr>
<tr class="separator:a8871bc537122c685a7a4581dd581f484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc6e541925a00406f009407ccfd1bf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#abbc6e541925a00406f009407ccfd1bf7">writeFlashByte</a> (BYTE *flashAddr, BYTE flashData)</td></tr>
<tr class="memdesc:abbc6e541925a00406f009407ccfd1bf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one byte and flush to flash.  <a href="romops_8c.html#abbc6e541925a00406f009407ccfd1bf7">More...</a><br /></td></tr>
<tr class="separator:abbc6e541925a00406f009407ccfd1bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13941dd805199ceddb9d1295691b3adb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a13941dd805199ceddb9d1295691b3adb">setFlashWord</a> (WORD *flashAddr, WORD flashData)</td></tr>
<tr class="memdesc:a13941dd805199ceddb9d1295691b3adb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one word to the flash buffer.  <a href="romops_8c.html#a13941dd805199ceddb9d1295691b3adb">More...</a><br /></td></tr>
<tr class="separator:a13941dd805199ceddb9d1295691b3adb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac90bb19408226f3842989bdb4cdb1fc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#ac90bb19408226f3842989bdb4cdb1fc6">setFlashBuffer</a> (BYTE *flashAddr, BYTE *bufferaddr, BYTE bufferSize)</td></tr>
<tr class="memdesc:ac90bb19408226f3842989bdb4cdb1fc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a range of addresses to Flash.  <a href="romops_8c.html#ac90bb19408226f3842989bdb4cdb1fc6">More...</a><br /></td></tr>
<tr class="separator:ac90bb19408226f3842989bdb4cdb1fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93cb1137857adb45de08803329b53c49"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a93cb1137857adb45de08803329b53c49">ee_read</a> (WORD addr)</td></tr>
<tr class="memdesc:a93cb1137857adb45de08803329b53c49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a byte from data EEPROM.  <a href="romops_8c.html#a93cb1137857adb45de08803329b53c49">More...</a><br /></td></tr>
<tr class="separator:a93cb1137857adb45de08803329b53c49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5516e78e0d0120ac4f5630114bb23b1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a5516e78e0d0120ac4f5630114bb23b1e">ee_write</a> (WORD addr, BYTE data)</td></tr>
<tr class="memdesc:a5516e78e0d0120ac4f5630114bb23b1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one byte to data EEPROM.  <a href="romops_8c.html#a5516e78e0d0120ac4f5630114bb23b1e">More...</a><br /></td></tr>
<tr class="separator:a5516e78e0d0120ac4f5630114bb23b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a7fc1bdabb1a48e593bef1e325f970"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a03a7fc1bdabb1a48e593bef1e325f970">ee_read_short</a> (WORD addr)</td></tr>
<tr class="memdesc:a03a7fc1bdabb1a48e593bef1e325f970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a WORD (16 bit) word from EEPROM.  <a href="romops_8c.html#a03a7fc1bdabb1a48e593bef1e325f970">More...</a><br /></td></tr>
<tr class="separator:a03a7fc1bdabb1a48e593bef1e325f970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd783320b06ca8fff17b75809d75bbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#adcd783320b06ca8fff17b75809d75bbe">ee_write_short</a> (WORD addr, WORD data)</td></tr>
<tr class="memdesc:adcd783320b06ca8fff17b75809d75bbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a WORD (16 bit) data to EEPROM.  <a href="romops_8c.html#adcd783320b06ca8fff17b75809d75bbe">More...</a><br /></td></tr>
<tr class="separator:adcd783320b06ca8fff17b75809d75bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954e61d8c377382832f8348e0eed0f4d"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a954e61d8c377382832f8348e0eed0f4d">readCPUType</a> (void)</td></tr>
<tr class="memdesc:a954e61d8c377382832f8348e0eed0f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the DevId from the Config area.  <a href="romops_8c.html#a954e61d8c377382832f8348e0eed0f4d">More...</a><br /></td></tr>
<tr class="separator:a954e61d8c377382832f8348e0eed0f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acf0ce8f005d036e3a53dda91c13bc517"><td class="memItemLeft" align="right" valign="top"><a class="el" href="union_flash_flags.html">FlashFlags</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#acf0ce8f005d036e3a53dda91c13bc517">flashFlags</a></td></tr>
<tr class="memdesc:acf0ce8f005d036e3a53dda91c13bc517"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash routines hide the complexity of erasing and writing in pages.  <a href="romops_8c.html#acf0ce8f005d036e3a53dda91c13bc517">More...</a><br /></td></tr>
<tr class="separator:acf0ce8f005d036e3a53dda91c13bc517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ab68cd3204feebe32e5f73cd8dfa8e"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a74ab68cd3204feebe32e5f73cd8dfa8e">flashbuf</a> [64]</td></tr>
<tr class="separator:a74ab68cd3204feebe32e5f73cd8dfa8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0221378083ecf9f88c033d82c478d8ab"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a0221378083ecf9f88c033d82c478d8ab">flashidx</a></td></tr>
<tr class="separator:a0221378083ecf9f88c033d82c478d8ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f118e023efd880f288a5d862efa3b64"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="romops_8c.html#a1f118e023efd880f288a5d862efa3b64">flashblock</a></td></tr>
<tr class="separator:a1f118e023efd880f288a5d862efa3b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a93cb1137857adb45de08803329b53c49" name="a93cb1137857adb45de08803329b53c49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93cb1137857adb45de08803329b53c49">&#9670;&nbsp;</a></span>ee_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BYTE ee_read </td>
          <td>(</td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a byte from data EEPROM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address to be read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the byte from EEPROM </dd></dl>

</div>
</div>
<a id="a03a7fc1bdabb1a48e593bef1e325f970" name="a03a7fc1bdabb1a48e593bef1e325f970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03a7fc1bdabb1a48e593bef1e325f970">&#9670;&nbsp;</a></span>ee_read_short()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD ee_read_short </td>
          <td>(</td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a WORD (16 bit) word from EEPROM. </p>
<p >Data is stored in little endian format </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address to be read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the WORD from EEPROM </dd></dl>

</div>
</div>
<a id="a5516e78e0d0120ac4f5630114bb23b1e" name="a5516e78e0d0120ac4f5630114bb23b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5516e78e0d0120ac4f5630114bb23b1e">&#9670;&nbsp;</a></span>ee_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ee_write </td>
          <td>(</td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one byte to data EEPROM. </p>
<p >We verify at end and try again if necessary. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address to be written </td></tr>
    <tr><td class="paramname">data</td><td>the data to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adcd783320b06ca8fff17b75809d75bbe" name="adcd783320b06ca8fff17b75809d75bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcd783320b06ca8fff17b75809d75bbe">&#9670;&nbsp;</a></span>ee_write_short()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ee_write_short </td>
          <td>(</td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a WORD (16 bit) data to EEPROM. </p>
<p >Data is stored in little endian format. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address to be written </td></tr>
    <tr><td class="paramname">data</td><td>the data to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a25fe3242898cee3cc9afdcd5a5bf94c7" name="a25fe3242898cee3cc9afdcd5a5bf94c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25fe3242898cee3cc9afdcd5a5bf94c7">&#9670;&nbsp;</a></span>flushFlashImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flushFlashImage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the buffer has unwritten changes then write these out to Flash. </p>

</div>
</div>
<a id="a02557928852521f6abecc4d65c6ba12b" name="a02557928852521f6abecc4d65c6ba12b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02557928852521f6abecc4d65c6ba12b">&#9670;&nbsp;</a></span>initRomOps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initRomOps </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise variables for Flash program tracking. </p>

</div>
</div>
<a id="a954e61d8c377382832f8348e0eed0f4d" name="a954e61d8c377382832f8348e0eed0f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954e61d8c377382832f8348e0eed0f4d">&#9670;&nbsp;</a></span>readCPUType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD readCPUType </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the DevId from the Config area. </p>

</div>
</div>
<a id="aaa110b0fadbf54ad889081cf81818f73" name="aaa110b0fadbf54ad889081cf81818f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa110b0fadbf54ad889081cf81818f73">&#9670;&nbsp;</a></span>readFlashBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BYTE readFlashBlock </td>
          <td>(</td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>flashAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash block read. </p>
<p >Read flash through a 64 byte buffer with write back management. valid:3 //must be 101 (5) to be valid loaded:1 // if buffer is loaded modified:1 //flag if buffer is modified zeroto1:1 //flag if long write with block erase Read a byte from flash. If the required buffer is currently loaded then use the value stored there since it may have been modified. Otherwise load the buffer from flash before returning the value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address to be read from Flash </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the byte read from Flash </dd></dl>

</div>
</div>
<a id="ac90bb19408226f3842989bdb4cdb1fc6" name="ac90bb19408226f3842989bdb4cdb1fc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac90bb19408226f3842989bdb4cdb1fc6">&#9670;&nbsp;</a></span>setFlashBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setFlashBuffer </td>
          <td>(</td>
          <td class="paramtype">BYTE *&#160;</td>
          <td class="paramname"><em>flashAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE *&#160;</td>
          <td class="paramname"><em>bufferaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>bufferSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a range of addresses to Flash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flashAddr</td><td></td></tr>
    <tr><td class="paramname">bufferaddr</td><td></td></tr>
    <tr><td class="paramname">bufferSize</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a13941dd805199ceddb9d1295691b3adb" name="a13941dd805199ceddb9d1295691b3adb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13941dd805199ceddb9d1295691b3adb">&#9670;&nbsp;</a></span>setFlashWord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setFlashWord </td>
          <td>(</td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>flashAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>flashData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one word to the flash buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flashAddr</td><td>the destination address of the byte to be written </td></tr>
    <tr><td class="paramname">flashData</td><td>the data word to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abbc6e541925a00406f009407ccfd1bf7" name="abbc6e541925a00406f009407ccfd1bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbc6e541925a00406f009407ccfd1bf7">&#9670;&nbsp;</a></span>writeFlashByte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeFlashByte </td>
          <td>(</td>
          <td class="paramtype">BYTE *&#160;</td>
          <td class="paramname"><em>flashAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>flashData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one byte and flush to flash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flashAddr</td><td>the destination address of the byte to be written </td></tr>
    <tr><td class="paramname">flashData</td><td>the data byte to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8871bc537122c685a7a4581dd581f484" name="a8871bc537122c685a7a4581dd581f484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8871bc537122c685a7a4581dd581f484">&#9670;&nbsp;</a></span>writeFlashImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeFlashImage </td>
          <td>(</td>
          <td class="paramtype">BYTE *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a byte to the FLASH image. </p>
<p >You may need to flush current image to Flash if necessary. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the destination address of the byte to be written </td></tr>
    <tr><td class="paramname">data</td><td>the data byte to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9c036acbdc6bb16d7e80349b77d45251" name="a9c036acbdc6bb16d7e80349b77d45251"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c036acbdc6bb16d7e80349b77d45251">&#9670;&nbsp;</a></span>writeFlashShort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeFlashShort </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash block write. </p>
<p >flash 64 byte buffer. Fast write, this requires no 0 to 1 bit changes, only 1 to 0 bits are allowed. Or use write_flash_long with erase before write </p>

</div>
</div>
<a id="a0c43e849624fd34b8887a26c0bd94eb9" name="a0c43e849624fd34b8887a26c0bd94eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c43e849624fd34b8887a26c0bd94eb9">&#9670;&nbsp;</a></span>writeFlashWithErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeFlashWithErase </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash block write. </p>
<p >flash 64 byte buffer with block erase. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1f118e023efd880f288a5d862efa3b64" name="a1f118e023efd880f288a5d862efa3b64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f118e023efd880f288a5d862efa3b64">&#9670;&nbsp;</a></span>flashblock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD flashblock</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a74ab68cd3204feebe32e5f73cd8dfa8e" name="a74ab68cd3204feebe32e5f73cd8dfa8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74ab68cd3204feebe32e5f73cd8dfa8e">&#9670;&nbsp;</a></span>flashbuf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BYTE flashbuf[64]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acf0ce8f005d036e3a53dda91c13bc517" name="acf0ce8f005d036e3a53dda91c13bc517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf0ce8f005d036e3a53dda91c13bc517">&#9670;&nbsp;</a></span>flashFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="union_flash_flags.html">FlashFlags</a> flashFlags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash routines hide the complexity of erasing and writing in pages. </p>
<p >A buffer is kept of the current page being changed and then writing it back in a single operation. This reduces the number of writes to each page of flash and extending its life. </p>

</div>
</div>
<a id="a0221378083ecf9f88c033d82c478d8ab" name="a0221378083ecf9f88c033d82c478d8ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0221378083ecf9f88c033d82c478d8ab">&#9670;&nbsp;</a></span>flashidx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BYTE flashidx</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="romops_8c.html">romops.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
